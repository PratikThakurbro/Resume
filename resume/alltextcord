<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="allcss/allinone.css">
        <link href="https://unpkg.com/remixicon/fonts/remixicon.css" rel="stylesheet">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/jquery.validation/1.19.5/jquery.validate.min.js"></script>
        <script src="alljs/login.js"></script>
        <title>Document</title>
    </head>
    <body>
        <main>
            <div class="container">
                <header class="navbar">
                    <div class="logo">
                        <img src="img/side9-removebg-preview.png" alt="Logo">
                    </div>
                    <nav class="nav-links">
                        <a href="#home">Home</a>
                        <a href="#blog">Blog</a>
                        <a href="#about">About</a>
                        <a href="#login" id="show-login-form">Login</a>
                    </nav>
                </header>
                <div class="section">
                    <div class="register-form" id="register-form-text">
                        <p>Streamline Your Website's User Management</p>
                        <h2>Innovative Registration and Login Solutions</h2>
                        <h5>Enhance user experience with our elegant and versatile registration and login forms.</h5>
                        <div class="button-box">
                            <div class="registernow">
                                <button class="registernow-button" id="show-register-form"> Registration</button>
                            </div>
                        </div>
                    </div>

                    <!-- Registration Form -->
                    <div class="account-create-form" id="register-form">
                        <div class="form">
                            <i class="ri-close-line close-icon" id="close-register-form"></i>
                            <h2>Register Now</h2>
                            <form id="registrationForm" method="POST" action="register.php">
                                <label for="full-name">Enter your full name</label>
                                <input type="text" id="full-name" name="full-name">
                                <div class="error-register" id="fullNameError"></div>

                                <label for="phone">Enter your phone number</label>
                                <input type="number" id="phone" name="phone">
                                <div class="error-register" id="phoneError"></div>

                                <label for="gmail">Enter your Gmail</label>
                                <input type="email" id="gmail" name="gmail">
                                <div class="error-register" id="gmailError"></div>

                                <label for="password">Password</label>
                                <input type="password" id="password" name="password">
                                <div class="error-register" id="passwordError"></div>

                                <div class="button-box">
                                    <button class="registernow-button" type="submit">Register Now</button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Login Form -->
                     <div class="account-create-form" id="login-form">
                        <div class="form">
                            <i class="ri-close-line close-icon" id="close-login-form"></i>
                            <h2>Login</h2>
                            <form id="loginForm" method="POST" action="login.php">
                                <label for="login-gmail">Enter your Gmail</label>
                                <input type="email" id="login-gmail" name="gmail">
                                <div id="loginGmailError" class="error-login"></div>

                                <label for="login-password">Password</label>
                                <input type="password" id="login-password" name="password">
                                <div id="loginPasswordError" class="error-login"></div>

                                <a href="#" id="forgot-password-link">Forgot password</a> <br><br>

                                <div class="button-box">
                                    <button class="login-button" type="submit" name="login">Login</button>
                                </div>
                            </form>
                        </div> 
                    </div> 

                    <!-- Forgot Password Form -->
                    <div class="forget-box" id="forgot-password-form">
                        <i class="ri-close-line close-icon " id="close-forgot-password"></i>
                        <h2>Forgot Password</h2>
                        <form id="forgotPasswordForm" method="POST" action="forgot_password.php">
                            <label for="f-gmail">Enter your Gmail</label>
                            <input type="email" id="f-gmail" name="gmail">
                            <div id="forgotGmailError" class="error-forgot-pass"></div>

                            <label for="f-password">Password</label>
                            <input type="password" id="f-password" name="password">
                            <div id="forgotPasswordError" class="error-forgot-pass"></div>

                            <label for="f-conform-password">Confirm Password</label>
                            <input type="password" id="f-conform-password" name="confirm-password">
                            <div id="forgotConfirmPasswordError" class="error-forgot-pass"></div>

                            <div class="button-box">
                                <button class="login-button" type="submit" name="forgot">Reset Password</button>
                            </div>
                        </form>
                    </div>

                    <div class="img">
                        <img src="img/side5-removebg-preview.png" alt="img1">
                    </div>
                </div>
            </div>
        </main>
    </body>
</html>



/* General reset and base styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Courier New', Courier, monospace;
}

/* Body and HTML styles */
body, html {
    width: 100%;
    /* height: 100%; */
    margin: 0;
    font-family: Arial, sans-serif;
    background-color: #080808;
}
main{
    width: 100%;
    height: 100vh;
    background-color: #fff;
    align-items: center;
    background-image:url(../img/bg3.jpg);
    background-size: cover; 
    background-position: center; 
    background-repeat: no-repeat; 
    display: flex;
    justify-content: center;  
    position: relative;

}
main::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(172, 197, 241, 0.212); /* Example overlay color */
    z-index: 1; /* Place behind the content */
}


/* Container styles */
.container {
    width: 90%;
}
.navbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: transparent;
    padding: 10px 10px;
    color: whitesmoke;
    position: relative;
    z-index: 6;
    margin-bottom: 5px;
}

.logo img {
    height: 40px; /* Adjust height as needed */
}

.nav-links {
    display: flex;
    gap: 20px;
}

.nav-links a {
    color: #555;
    text-decoration: none;
    padding: 10px 15px;
    border-radius: 5px;
    transition: background-color 0.3s, color 0.3s;
   border: 1px solid white;
   /* background-color: #007bff; */

}

.nav-links a:hover {
    background-color: white;
    color: #555;
}
.active{
    background-color: white;
    color: #555;
}
/* Mobile menu toggle */
.menu-toggle {
    display: none;
    flex-direction: column;
    cursor: pointer;
}

.menu-toggle .bar {
    background-color: #fff;
    height: 3px;
    width: 25px;
    margin: 3px 0;
    transition: 0.3s;
}

/* Responsive design */
@media (max-width: 768px) {
    .nav-links {
        display: none;
        flex-direction: column;
        width: 100%;
        position: absolute;
        top: 60px;
        left: 0;
        background-color: #333;
        text-align: center;
    }
    
    .nav-links.active {
        display: flex;
    }

    .menu-toggle {
        display: flex;
    }
}
/* Header styles */
.section {
    width: 100%;
    height: 85vh;
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    background-color: transparent;
    padding: 20px;
    /* border: 1px solid #ddd; */
    box-shadow: 1px 1px 1px 0 rgb(201, 201, 202);
    border-radius: 10px;
    position: relative;
    overflow: hidden; /* Ensures the pseudo-elements do not overflow */
}

/* ::before pseudo-element */
.section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(171, 207, 255, 0.397); /* Semi-transparent overlay */
    z-index: 2; /* Ensure it sits above the background but below other content */
}

/* Hide all forms initially */
#register-form, #login-form, #forgot-password-form {
    display: none;
}

/* Register-form styles */
.register-form {
    max-width: 800px;
    width: 60%;
    margin: 20px 0;
    padding: 20px;
    border: 1px solid #ddd;
    border-radius: 8px;
    background-color: #fff;
    box-shadow: 2px 2px 2px 0px  #8d8dff;
    color: #000;
    z-index: 9;
    transition: opacity 0.5s ease-in-out;

  
}
.register-form p {
    font-size: 1.2em;
    color: #7371f0;
    margin-bottom: 10px;
}

.register-form h2 {
    font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
    font-size: 2.4em;
    color: rgb(0, 0, 0);
    margin: 10px 0;
    z-index: 4;
}

.register-form h5 {
    font-size: 1.1em;
    color: #555;
    margin-bottom: 20px;
}

/* Button styles */
.button-box {
    width: 40%;
    display: flex;
    justify-content: space-between;
    gap: 10px;
}

.registernow-button, .login-button {
    background-color: #007bff;
    color: #fff;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1em;
    transition: background-color 0.3s;
}

.registernow-button:hover, .login-button:hover {
    background-color: #0056b3;
    color: #fff7f7;
}
.registernow-button:focus, .login-button:focus {
    outline: 2px solid #cfe3f8; /* Focus outline color */
    outline-offset: 2px; /* Offset for the outline */
}

/* Form styles */
.account-create-form, .forget-box {
    flex: 1;
    max-width: 750px;
    width: 60%;
    padding: 20px;
    border: 1px solid #ddd;
    border-radius: 8px;
    background-color: #f9f9f9;
    color: #000;
    z-index: 3;
    transition: opacity 0.5s ease-in-out;

}

.account-create-form .form {
    background-color: #f9f9f9;
}

.account-create-form h2, .forget-box h2 {
    font-size: 2em;
    color: #000;
    margin-bottom: 20px;
}

.account-create-form label, .forget-box label {
    display: block;
    margin-bottom: 5px;
    color: #7371f0;
    font-size: 1em;
}

.account-create-form input, .forget-box input {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 1em;
    transition: opacity 0.5s ease-in-out;

}

/* Error message styles */
.error-register, .error-login, .error-forgot-pass {
    color: red;
    transition: opacity 0.5s ease-in-out;
}
 /* Default border color */
 input {
    border: 1px solid #ccc;
    padding: 8px;
    border-radius: 4px;
    box-sizing: border-box;
    width: 100%;
}
/* Border color for inputs with errors */
input.error {
    border-color: red;
}

/* Close icon styles */
.close-icon {
    position: absolute;
    top: 10px;
    right: 10px;
    cursor: pointer;
    font-size: 24px; 
    color: #3e3f3e; 
}
.forget-box, .account-create-form{
    position: relative;
}

/* Image styles */
.img {
    width: 40%;
    position: absolute;
    bottom: 0;
    right: 0;
    z-index: 3;
}

.img img {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .header {
        flex-direction: column;
        padding: 10px;
    }

    .register-form, .account-create-form, .forget-box {
        width: 100%;
        padding: 10px;
    }

    .img {
        width: 100%;
        position: relative;
        margin-top: 20px;
        bottom: auto;
        right: auto;
    }

    .img img {
        width: 100%;
        height: auto;
        border-radius: 8px;
    }

    .register-form h2, .account-create-form h2, .forget-box h2 {
        font-size: 1.5em;
    }

    .register-form h5 {
        font-size: 1em;
    }

    .registernow-button, .login-button {
        padding: 8px 16px;
        font-size: 0.9em;
    }
}

@media (max-width: 480px) {
    .register-form p {
        font-size: 1em;
    }

    .register-form h2, .account-create-form h2, .forget-box h2 {
        font-size: 1.2em;
    }

    .register-form h5 {
        font-size: 0.9em;
    }

    .registernow-button, .login-button {
        padding: 6px 12px;
        font-size: 0.8em;
    }
}




document.addEventListener('DOMContentLoaded', function() {
    const menuToggle = document.getElementById('menu-toggle');
    const navLinks = document.querySelector('.nav-links');

    menuToggle.addEventListener('click', function() {
        navLinks.classList.toggle('active');
    });
});

$(document).ready(function() {
    // Initially show the welcome page and hide other forms
    $('#register-form').hide();
    $('#login-form').hide();
    $('#forgot-password-form').hide();

    // Show the registration form
    $('#show-register-form').click(function() {
        $('#register-form-text').hide();
        $('#login-form').hide();
        $('#forgot-password-form').hide();
        $('#register-form').show();
    });

    // Show the login form
    $('#show-login-form').click(function() {
        $('#register-form-text').hide();
        $('#register-form').hide();
        $('#forgot-password-form').hide();
        $('#login-form').show();
    });

    
    // Show the forgot password form
    $('#forgot-password-link').click(function() {
        $('#login-form').hide();
        $('#register-form').hide();
        $('#forgot-password-form').show();
    });

    // Close the registration form
    $('#close-register-form').click(function() {
        location.reload();
        $('#register-form').hide();
        $('#register-form-text').show();
    });

    // Close the login form
    $('#close-login-form').click(function() {
        location.reload();
        $('#login-form').hide();
        $('#register-form-text').show();
    });

    // Close the forgot password form
    $('#close-forgot-password').click(function() {
        // location.reload();
        $('#forgot-password-form').hide();
        $('#login-form').show(); 
    });

    
});

$(document).ready(function() {
    $('#registrationForm').on('submit', function(event) {
        let valid = true;

        // Clear previous errors
        $('.error-register').text('');
        $('input').removeClass('error'); // Clear previous error classes

        // Full Name Validation
        const fullName = $('#full-name').val().trim();
        if (fullName.length < 3) {
            $('#fullNameError').text('Full name must be at least 3 characters long');
            $('#full-name').addClass('error'); // Add error class
            valid = false;
        }

        // Phone Validation
        const phone = $('#phone').val().trim();
        if (phone.length < 10) {
            $('#phoneError').text('Phone number must be at least 10 digits long');
            $('#phone').addClass('error'); // Add error class
            valid = false;
        }

        // Email Validation
        const email = $('#gmail').val().trim();
        const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailPattern.test(email)) {
            $('#gmailError').text('Please enter a valid email address');
            $('#gmail').addClass('error'); // Add error class
            valid = false;
        }

        // Password Validation
        const password = $('#password').val().trim();
        if (password.length < 8) {
            $('#passwordError').text('Password must be at least 8 characters long');
            $('#password').addClass('error'); // Add error class
            valid = false;
        }

        if (!valid) {
            event.preventDefault(); // Prevent form submission if validation fails
           
        }
    });
});

$(document).ready(function() {
    $('#loginForm').on('submit', function(event) {
        let valid = true;

        // Clear previous errors
        $('.error-login').text('');
        $('input').removeClass('error'); // Clear previous error classes

        // Email Validation
        const email = $('#login-gmail').val().trim();
        const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailPattern.test(email)) {
            $('#loginGmailError').text('Please enter a valid email address');
            $('#login-gmail').addClass('error'); // Add error class
            valid = false;
        }

        // Password Validation
        const password = $('#login-password').val().trim();
        if (password.length < 8) {
            $('#loginPasswordError').text('Password must be at least 8 characters long');
            $('#login-password').addClass('error'); // Add error class
            valid = false;
        }

        if (!valid) {
            event.preventDefault(); // Prevent form submission if validation fails
        }
    });
    // Optional: Close form functionality
$('#close-login-form').on('click', function() {
    $('#login-form').hide();
});
});





$(document).ready(function() {
    $('#forgotPasswordForm').on('submit', function(event) {
        let valid = true;

        // Clear previous errors
        $('.error-forgot-pass').text('');
        $('input').removeClass('error'); // Clear previous error classes

        // Email Validation
        const email = $('#f-gmail').val().trim();
        const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailPattern.test(email)) {
            $('#forgotGmailError').text('Please enter a valid email address');
            $('#f-gmail').addClass('error'); // Add error class
            valid = false;
        }

        // Password Validation
        const password = $('#f-password').val().trim();
        if (password.length < 8) {
            $('#forgotPasswordError').text('Password must be at least 8 characters long');
            $('#f-password').addClass('error'); // Add error class
            valid = false;
        }

        // Confirm Password Validation
        const confirmPassword = $('#f-conform-password').val().trim();
        if (confirmPassword !== password) {
            $('#forgotConfirmPasswordError').text('Passwords do not match');
            $('#f-conform-password').addClass('error'); // Add error class
            valid = false;
        }

        if (!valid) {
            event.preventDefault(); // Prevent form submission if validation fails
        }
        
    });
    // Optional: Close form functionality
    $('#close-forgot-password').on('click', function() {
        $('#forgot-password-form').hide();
    });
});



// resume 
$(document).ready(function() {
    $('#contactForm').on('submit', function(e) {
        e.preventDefault(); // Prevent the form from submitting the traditional way
        
        $.ajax({
            type: 'POST',
            url: $(this).attr('action'),
            data: $(this).serialize(),
            success: function(response) {
                $('#formMessage').html('<p>Thank you for your message!</p>');
                $('#contactForm')[0].reset();
            },
            error: function() {
                $('#formMessage').html('<p>There was an error submitting the form. Please try again.</p>');
            }
        });
    });
});


<?php

session_start();

if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $gmail = $_POST['gmail'];
    $password = $_POST['password'];

    // Your database connection and password checking logic here
    // Assuming $isPasswordCorrect is the result of the password check

    if (!$isPasswordCorrect) {
        // Set session variable with an error message
        $_SESSION['login_error'] = "Incorrect password. Please try again.";
        header("Location: index.php"); // Redirect back to the login page
        exit();
    } else {
        // Proceed with successful login
    }
}


// if ($_SERVER['REQUEST_METHOD'] == 'POST') {
//     // Collect form data
//     $login_gmail = $_POST["gmail"] ?? '';
//     $login_password = $_POST["password"] ?? '';

    // Validate inputs
    if (empty($login_gmail) || empty($login_password)) {
        die("Email and password are required.");
    }

    // echo "Login Email: " . htmlspecialchars($login_gmail) . "<br>";
    // echo "Login Password: " . htmlspecialchars($login_password) . "<br>";

    // Database connection
    $conn = mysqli_connect("localhost", "root", "", "resume");

    if (!$conn) {
        die("Connection failed: " . mysqli_connect_error());
    }

    // Prepare and execute query
    $query = "SELECT * FROM resume_user WHERE email = ? AND password = ?";
    $stmt = $conn->prepare($query);
    if (!$stmt) {
        die("Prepare failed: " . $conn->error);
    }
    $stmt->bind_param("ss", $login_gmail, $login_password);
    $stmt->execute();
    $result = $stmt->get_result();

    if ($result->num_rows > 0) {
        $user = $result->fetch_assoc();
        $_SESSION['user_id'] = $user['user_id'];
        $_SESSION['full-name'] = $user['name']; // Ensure this matches the column name in your table
        $_SESSION['gmail'] = $user['email'];
        $_SESSION['phone'] = $user['phone'];
        echo "User found and session variables set.<br>";
        header("Location: resume-page.php");
        exit();
    } else {
        // echo "<script>
        //     alert('Invalid email or password.');
        //   </script>";
    }

    // Close connection
    $stmt->close();
    $conn->close();
}
?>














<!-- <php
$register_name = $_POST["full-name"];
$register_no = $_POST["phone"];
$register_gmail = $_POST["gmail"];
$register_password = $_POST["password"];

// Database connection
$conn = mysqli_connect("localhost", "root", "", "resume") or die("Connection failed: " . mysqli_connect_error());

// Check for existing phone or email
$check_query = "SELECT * FROM resume_user WHERE phone='$register_no' OR email='$register_gmail'";
$check_result = mysqli_query($conn, $check_query);

if (mysqli_num_rows($check_result) > 0) {
    echo "Phone number or Email already exists.";
} else {
    // Hash the password
    // $hashed_password = password_hash($register_password, PASSWORD_BCRYPT);

    // Insert query
    $sql = "INSERT INTO resume_user (name, phone, email, password) VALUES ('$register_name', '$register_no', '$register_gmail', '$register_password')";

    if (mysqli_query($conn, $sql)){
        header("Location: resume-page.php");
    } else {
        echo "Insert failed: " . mysqli_error($conn);
    }
}

// Close connection
mysqli_close($conn);
?> -->

<?php
// Collect form data
$register_name = $_POST["full-name"] ?? '';
$register_no = $_POST["phone"] ?? '';
$register_gmail = $_POST["gmail"] ?? '';
$register_password = $_POST["password"] ?? '';

// Validate inputs (optional but recommended)
if (empty($register_name) || empty($register_no) || empty($register_gmail) || empty($register_password)) {
    die("All fields are required.");
}

// Database connection
$conn = mysqli_connect("localhost", "root", "", "resume");

// Check connection
if (!$conn) {
    die("Connection failed: " . mysqli_connect_error());
}

// Check for existing phone or email
$check_query = "SELECT * FROM resume_user WHERE phone = ? OR email = ?";
$stmt = $conn->prepare($check_query);
$stmt->bind_param("ss", $register_no, $register_gmail);
$stmt->execute();
$check_result = $stmt->get_result();

if ($check_result->num_rows > 0) {
    echo "Phone number or Email already exists.";
} else {
    // Insert query
    $insert_query = "INSERT INTO resume_user (name, phone, email, password) VALUES (?, ?, ?, ?)";
    $stmt = $conn->prepare($insert_query);
    $stmt->bind_param("ssss", $register_name, $register_no, $register_gmail, $register_password);

    if ($stmt->execute()) {
        header("Location: yourResume.php");
        exit();
    } else {
        echo "Insert failed: " . $stmt->error;
    }
}

// Close connection
$stmt->close();
$conn->close();
?>
<?php 
   session_start();
   if (!isset($_SESSION['full-name'])) {
       header("Location: inonefile.php");
       exit();
   }
// Debug session variables

// session_start();

// echo "Full Name: " . (isset($_SESSION['full-name']) ? $_SESSION['full-name'] : 'Not Set') . "<br>";
// echo "Gmail: " . (isset($_SESSION['gmail']) ? $_SESSION['gmail'] : 'Not Set') . "<br>";
// echo "Phone: " . (isset($_SESSION['phone']) ? $_SESSION['phone'] : 'Not Set') . "<br>";

// if (!isset($_SESSION['full-name'])) {
//     echo "Session variable 'full-name' is not set.<br>";
// }

// if (!isset($_SESSION['gmail'])) {
//     echo "Session variable 'gmail' is not set.<br>";
// }

// if (!isset($_SESSION['phone'])) {
//     echo "Session variable 'phone' is not set.<br>";
// }
?>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Resume</title>
    <link rel="stylesheet" href="allcss/resume.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="alljs/login.js" defer></script>
</head>
<body>
    <main>
        <header class="navbar">
            <div class="logo">
                <img src="img/side9-removebg-preview.png" alt="Logo"> <!-- Your logo image -->
            </div>
            <nav class="nav-links">
                <a href="inonefile.php" >Home</a>
                <a href="#blog">Blog</a>
                <a href="#about">About</a>
                <a href="logout.php" class="active" id="logout" >Logout</a>
            </nav>
        </header>
        
        <div class="container"> 
            <div id="main-box"></div>
            <!-- <div class="container"> -->
                <header>
                    <h1><?php echo htmlspecialchars($_SESSION['full-name']); ?></h1>
                </header>

                <form id="resumeForm" method="post" action="save_resume.php">
                    <!-- Contact Information Section -->
                    <section id="contact">
                        <h2>Contact Information</h2>
                        <ul>
                            <li>Email: <input type="email" name="contact_email" value="<?php echo htmlspecialchars($_SESSION['gmail']); ?>" required></li>
                            <li>Phone: <input type="text" name="contact_phone" value="<?php echo htmlspecialchars($_SESSION['phone']); ?>" required></li>
                            <li>Present Address: <input type="text" name="present_address" placeholder="Present Address"></li>
                            <li>Permanent Address: <input type="text" name="permanent_address" placeholder="Permanent Address"></li>
                            <li>Gender: 
                                <select name="gender" required>
                                    <option value="" disabled selected>Select Gender</option>
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                    <option value="Other">Other</option>
                                </select>
                            </li>
                        </ul>
                    </section>

                    <!-- Education Section -->
                    <section id="education">
                        <h2>Education</h2>
                        <label for="degree">Degree Name:</label>
                        <input type="text" id="degree" name="degree">

                        <label for="university">University/College Name:</label>
                        <input type="text" id="university" name="university">

                        <label for="year">Year:</label>
                        <input type="number" id="year" name="year" min="1900" max="2025" step="1">
                    </section>

                    <!-- Experience Section -->
                    <section id="experience">
                        <h2>Experience</h2>
                        <label for="jobTitle">Job Title:</label>
                        <input type="text" id="jobTitle" name="jobTitle">

                        <label for="companyName">Company Name:</label>
                        <input type="text" id="companyName" name="companyName">

                        <label for="startDate">Start Date (Month/Year):</label>
                        <input type="text" id="startDate" name="startDate" placeholder="e.g., January 2020"> 

                        <label for="endDate"> Start Date End Date (Month/Year):</label>
                        <input type="text" id="endDate" name="endDate" placeholder="e.g., December 2022">

                        <label for="responsibilities">Responsibilities/Achievements:</label> 
                        <textarea id="responsibilities" name="responsibilities" rows="4"></textarea>
                    </section>

                    <!-- Skills Section -->
                    <section id="skills">
                        <h2>Skills</h2>
                        <label for="skills">Add Skill:</label>
                        <input type="text" id="skill" name="skill">
                    </section>

                    <!-- Projects Section -->
                    <section id="projects">
                        <h2>Projects</h2>
                        <label for="projectTitle">Project Title:</label>
                        <input type="text" id="projectTitle" name="projectTitle">

                        <label for="projectDescription">Short Description:</label>
                        <textarea id="projectDescription" name="projectDescription" rows="4"></textarea>

                        <label for="projectResponsibilities">Responsibilities/Achievements:</label>
                        <textarea id="projectResponsibilities" name="projectResponsibilities" rows="4"></textarea>
                    </section>

                    <!-- Contact Me Section -->
                    <section id="contact-form">
                        <h2>Contact Me</h2>
                        <label for="contactName">Name:</label>
                        <input type="text" id="contactName" name="contactName" value="<?php echo htmlspecialchars($_SESSION['full-name']); ?>">

                        <label for="contactEmail">Email:</label>
                        <input type="email" id="contactEmail" name="contactEmail" value="<?php echo htmlspecialchars($_SESSION['gmail']); ?>">

                        <label for="contactMessage">Message:</label>
                        <textarea id="contactMessage" name="contactMessage"></textarea>
                    </section>

                    <button type="submit">Save Your Resume</button>
                </form>
            </div>
        </div>
    </main>
</body>
</html>












<?php
session_start();

// Check if the user is logged in
if (!isset($_SESSION['user_id'])) {
    echo "Location: inonefile.php";
    exit();
}

// Assign user_id from the session to a variable
$user_id = $_SESSION['user_id'];

// Database connection
$conn = new mysqli("localhost", "root", "", "resume");
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}

// Check if the form data is set
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    // Sanitize input data
    $email = filter_var($_POST['contact_email'], FILTER_SANITIZE_EMAIL);
    $phone = filter_var($_POST['contact_phone'], FILTER_SANITIZE_STRING);
    $present_address = filter_var($_POST['present_address'], FILTER_SANITIZE_STRING);
    $permanent_address = filter_var($_POST['permanent_address'], FILTER_SANITIZE_STRING);
    $gender = filter_var($_POST['gender'], FILTER_SANITIZE_STRING);
    $degree = filter_var($_POST['degree'], FILTER_SANITIZE_STRING);
    $university = filter_var($_POST['university'], FILTER_SANITIZE_STRING);
    $year = filter_var($_POST['year'], FILTER_SANITIZE_STRING);
    $job_title = filter_var($_POST['jobTitle'], FILTER_SANITIZE_STRING);
    $company_name = filter_var($_POST['companyName'], FILTER_SANITIZE_STRING);
    $start_date = filter_var($_POST['startDate'], FILTER_SANITIZE_STRING);
    $end_date = filter_var($_POST['endDate'], FILTER_SANITIZE_STRING);
    $responsibilities = filter_var($_POST['responsibilities'], FILTER_SANITIZE_STRING);
    $skill = filter_var($_POST['skill'], FILTER_SANITIZE_STRING);
    $project_title = filter_var($_POST['projectTitle'], FILTER_SANITIZE_STRING);
    $project_description = filter_var($_POST['projectDescription'], FILTER_SANITIZE_STRING);
    $project_responsibilities = filter_var($_POST['projectResponsibilities'], FILTER_SANITIZE_STRING);
    $contact_name = filter_var($_POST['contactName'], FILTER_SANITIZE_STRING);
    $contact_email = filter_var($_POST['contactEmail'], FILTER_SANITIZE_EMAIL);
    $contact_message = filter_var($_POST['contactMessage'], FILTER_SANITIZE_STRING);

    // Validate email
    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
        die("Invalid email format.");
    }

    // Check if data already exists for this user
    $sql = "SELECT * FROM resume_details WHERE user_id = {$user_id}";
    $result = $conn->query($sql);

    if ($result->num_rows > 0) {
        // Data exists, perform an update
        $sql = "UPDATE resume_details SET
                    email = '{$email}', 
                    phone = '{$phone}', 
                    present_address = '{$present_address}', 
                    permanent_address = '{$permanent_address}', 
                    gender = '{$gender}', 
                    degree = '{$degree}', 
                    university = '{$university}', 
                    year = '{$year}', 
                    job_title = '{$job_title}', 
                    company_name = '{$company_name}', 
                    start_date = '{$start_date}', 
                    end_date = '{$end_date}', 
                    responsibilities = '{$responsibilities}', 
                    skill = '{$skill}', 
                    project_title = '{$project_title}', 
                    project_description = '{$project_description}', 
                    project_responsibilities = '{$project_responsibilities}', 
                    contact_name = '{$contact_name}', 
                    contact_email = '{$contact_email}', 
                    contact_message = '{$contact_message}' 
                WHERE user_id = {$user_id}";

        if (!$conn->query($sql)) {
            die("Error: " . $conn->error);
        }
    } else {
        // Data does not exist, perform an insert
        $sql = "INSERT INTO resume_details (
                    user_id, email, phone, present_address, permanent_address, gender, 
                    degree, university, year, job_title, company_name, start_date, end_date, 
                    responsibilities, skill, project_title, project_description, project_responsibilities, 
                    contact_name, contact_email, contact_message
                ) 
                VALUES (
                    {$user_id}, '{$email}', '{$phone}', '{$present_address}', '{$permanent_address}', '{$gender}', 
                    '{$degree}', '{$university}', '{$year}', '{$job_title}', '{$company_name}', '{$start_date}', '{$end_date}', 
                    '{$responsibilities}', '{$skill}', '{$project_title}', '{$project_description}', '{$project_responsibilities}', 
                    '{$contact_name}', '{$contact_email}', '{$contact_message}'
                )";

        if (!$conn->query($sql)) {
            die("Error: " . $conn->error);
        }
    }

    // Redirect after successful operation
    header("Location: yourResume.php");
    exit();
} else {
    die("Invalid request method.");
}
$conn->close();

?>












<?php
session_start();

// Turn on error reporting
error_reporting(E_ALL);
ini_set('display_errors', 1);

// Check if the user is logged in
if (!isset($_SESSION['user_id'])) {
    header("Location: inonefile.php");
    exit();
}

// Database connection
$conn = mysqli_connect("localhost", "root", "", "resume");

if (!$conn) {
    die("Connection failed: " . mysqli_connect_error());
}

// Retrieve data for the logged-in user
$user_id = $_SESSION['user_id'];
$sql = "SELECT * FROM resume_details WHERE user_id = ?";
$stmt = $conn->prepare($sql);
$stmt->bind_param("i", $user_id);
$stmt->execute();
$result = $stmt->get_result();

if ($result->num_rows > 0) {
    $data = $result->fetch_assoc();
} else {
    $data = []; // Default to empty array if no data is found
}

// Close the statement and connection
$stmt->close();
mysqli_close($conn);

// // Debugging output
// echo '<pre>';
// print_r($data);
// echo '</pre>';

// Debug session variables  
// echo '<pre>';
// print_r($_SESSION);
// echo '</pre>';
?>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Resume</title>
    <link rel="stylesheet" href="allcss/resume.css">
    <link href="https://unpkg.com/remixicon/fonts/remixicon.css" rel="stylesheet"> <!-- Remix Icons CDN -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> <!-- jQuery CDN -->
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.19.5/jquery.validate.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>

    <script src="alljs/login.js"></script> 
</head>
<body>
    <div class="navbar">
        <div class="logo">
            <img src="img/side9-removebg-preview.png" alt="Logo"> <!-- Your logo image -->
        </div>
        <nav class="nav-links">
        <a href="inonefile.php" >Home</a>
            <a href="#blog">Blog</a>
            <a href="#about">About</a>
            <a href="logout.php" class="active" id="logout">Logout</a>
        </nav>
    </div>

    <div class="container"> 
        <main>
            <header>
                <h1><?php echo htmlspecialchars($_SESSION['full-name']); ?></h1>
            </header>

            <section id="contact">
                <h2>Contact Information</h2>
                <ul>
                    <li><strong>Email:</strong> <?php echo htmlspecialchars($_SESSION['gmail']); ?> </li>
                    <li><strong>Phone:</strong> <?php echo htmlspecialchars($data['phone'] ?? ''); ?></li>
                    <li><strong>Present Address:</strong> <?php echo htmlspecialchars($data['present_address'] ?? ''); ?></li>
                    <li><strong>Permanent Address:</strong> <?php echo htmlspecialchars($data['permanent_address'] ?? ''); ?></li>
                    <li><strong>Gender:</strong> <?php echo htmlspecialchars($data['gender'] ?? ''); ?></li>
                </ul>
            </section>

            <section id="education">
                <h2>Education</h2>
                <p><strong>Degree Name:</strong> <?php echo htmlspecialchars($data['degree'] ?? ''); ?></p>
                <p><strong>University/College Name:</strong> <?php echo htmlspecialchars($data['university'] ?? ''); ?></p>
                <p><strong>Year:</strong> <?php echo htmlspecialchars($data['year'] ?? ''); ?></p>
            </section>

            <section id="experience">
                <h2>Experience</h2>
                <p><strong>Job Title:</strong> <?php echo htmlspecialchars($data['job_title'] ?? ''); ?></p>
                <p><strong>Company Name:</strong> <?php echo htmlspecialchars($data['company_name'] ?? ''); ?></p>
                <p><strong>Start Date:</strong> <?php echo htmlspecialchars($data['start_date'] ?? ''); ?></p>
                <p><strong>End Date:</strong> <?php echo htmlspecialchars($data['end_date'] ?? ''); ?></p>
                <p><strong>Responsibilities/Achievements:</strong></p>
                <p><?php echo nl2br(htmlspecialchars($data['responsibilities'] ?? '')); ?> </p>
            </section>

            <section id="skills">
                <h2>Skills</h2>
                <p><?php echo htmlspecialchars($data['skill'] ?? ''); ?></p>
            </section>

            <section id="projects">
                <h2>Projects</h2>
                <p><strong>Project Title:</strong> <?php echo htmlspecialchars($data['project_title'] ?? ''); ?></p>
                <p><strong>Short Description:</strong></p>
                <p><?php echo nl2br(htmlspecialchars($data['project_description'] ?? '')); ?></p>
                <p><strong>Responsibilities/Achievements:</strong></p>
                <p><?php echo nl2br(htmlspecialchars($data['project_responsibilities'] ?? '')); ?></p>
            </section>

            <section id="contact-form">
                <h2>Contact Me</h2>
                <p><strong>Name:</strong> <?php echo htmlspecialchars($_SESSION['full-name']); ?></p>
                <p><strong>Email:</strong> <?php echo htmlspecialchars($data['contact_email'] ?? ''); ?></p>
                <p><strong>Message:</strong></p>
                <p><?php echo nl2br(htmlspecialchars($data['contact_message'] ?? '')); ?></p>
            </section>
        </main>
        <section id="download-print">
            
            <button id="printButton">Print Resume</button>
            <button id="downloadButton">Download as PDF</button>
        </section>
    </div>
    
</body>
<script>
document.getElementById('printButton').addEventListener('click', function() {
    window.print();
});

document.getElementById('downloadButton').addEventListener('click', function() {
    var element = document.querySelector('main'); // Target the main section for PDF conversion
    var opt = {
        margin: 0.5,
        filename: 'resume.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 1 },
        jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
    };
    html2pdf().from(element).set(opt).save();
});
</script>


</html>
